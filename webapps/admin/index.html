<!DOCTYPE html>
<html lang="en-us">	
	<head>
		<meta charset="utf-8">
		<title> SmartAdmin (AJAX)</title>
		<meta name="description" content="">
		<meta name="author" content="">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		
		<!-- #CSS Links -->
		<!-- Basic Styles -->
		<link rel="stylesheet" type="text/css" media="screen" href="css/bootstrap.min.css">
		<link rel="stylesheet" type="text/css" media="screen" href="css/font-awesome.min.css">

		<!-- SmartAdmin Styles : Please note (smartadmin-production.css) was created using LESS variables -->
		<link rel="stylesheet" type="text/css" media="screen" href="css/smartadmin-production.min.css">
		<link rel="stylesheet" type="text/css" media="screen" href="css/smartadmin-skins.min.css">

		<!-- SmartAdmin RTL Support is under construction
			 This RTL CSS will be released in version 1.5
		<link rel="stylesheet" type="text/css" media="screen" href="css/smartadmin-rtl.min.css"> -->

		<!-- We recommend you use "your_style.css" to override SmartAdmin
			 specific styles this will also ensure you retrain your customization with each SmartAdmin update.-->
		<link rel="stylesheet" type="text/css" media="screen" href="css/your_style.css"> 

		<!-- Demo purpose only: goes with demo.js, you can delete this css when designing your own WebApp -->
		<link rel="stylesheet" type="text/css" media="screen" href="css/demo.min.css">

		<!-- #FAVICONS -->
		<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
		<link rel="icon" href="favicon.ico" type="image/x-icon">

		<link rel="stylesheet" type="text/css" media="screen" href="css/googleapi_font.css">

		<!-- #APP SCREEN / ICONS -->
		<!-- Specifying a Webpage Icon for Web Clip 
			 Ref: https://developer.apple.com/library/ios/documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html -->
		<link rel="apple-touch-icon" href="img/splash/sptouch-icon-iphone.png">
		<link rel="apple-touch-icon" sizes="76x76" href="img/splash/touch-icon-ipad.png">
		<link rel="apple-touch-icon" sizes="120x120" href="img/splash/touch-icon-iphone-retina.png">
		<link rel="apple-touch-icon" sizes="152x152" href="img/splash/touch-icon-ipad-retina.png">
		
		<!-- iOS web-app metas : hides Safari UI Components and Changes Status Bar Appearance -->
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		
		<!-- Startup image for web apps -->
		<link rel="apple-touch-startup-image" href="img/splash/ipad-landscape.png" media="screen and (min-device-width: 481px) and (max-device-width: 1024px) and (orientation:landscape)">
		<link rel="apple-touch-startup-image" href="img/splash/ipad-portrait.png" media="screen and (min-device-width: 481px) and (max-device-width: 1024px) and (orientation:portrait)">
		<link rel="apple-touch-startup-image" href="img/splash/iphone.png" media="screen and (max-device-width: 320px)">
		
		<!--  Code Mirror -->
		<link rel="stylesheet" href="cm519/lib/codemirror.css">
		<script src="cm519/lib/codemirror.js"></script>
		<style>.CodeMirror {border-top: 1px solid black; border-bottom: 1px solid black;}</style>
		
		<!-- json display -->
		<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
		
		<style type="text/css">
			#json-display {
	            border: 1px solid #000;
	            margin: 0;
	            padding: 10px 20px;
	        }
	    </style>

	</head>

	<body class="">

		<!-- #HEADER -->
		<header id="header">
			<div id="logo-group">

				<!-- PLACE YOUR LOGO HERE -->
				<span id="logo"> <img src="img/logo.png" alt="SmartAdmin"> </span>
				<!-- END LOGO PLACEHOLDER -->
			</div>

			<!-- #PROJECTS: projects dropdown -->
			<div class="project-context hidden-xs" id="recent_activity">

				<span class="label">${m.asString("main.activity")}</span>
				<span class="project-selector dropdown-toggle" data-toggle="dropdown">${m.asString("main.recent")} <i class="fa fa-angle-down"></i></span>

				<!-- Suggestion: populate this list with fetch and push technique -->
				<ul class="dropdown-menu">
					
				</ul>
				<!-- end dropdown-menu-->

			</div>

			
			<!-- end projects dropdown -->
			
			<!-- #TOGGLE LAYOUT BUTTONS -->
			<!-- pulled right: nav area -->
			<div class="pull-right">
				
				<!-- collapse menu button -->
				<div id="hide-menu" class="btn-header pull-right">
					<span> <a href="javascript:void(0);" data-action="toggleMenu" title="Collapse Menu"><i class="fa fa-reorder"></i></a> </span>
				</div>
				<!-- end collapse menu -->
				
				<!-- #MOBILE -->
				<!-- Top menu profile link : this shows only when top menu is active -->
				<ul id="mobile-profile-img" class="header-dropdown-list hidden-xs padding-5">
					<li class="">
						<a href="#" class="dropdown-toggle no-margin userdropdown" data-toggle="dropdown"> 
							<img src="img/avatars/male.png" alt="John Doe" class="online" />  
						</a>
						<ul class="dropdown-menu pull-right">
							<li>
								<a href="javascript:void(0);" class="padding-10 padding-top-0 padding-bottom-0"><i class="fa fa-cog"></i> Setting</a>
							</li>
							<li class="divider"></li>
							<li>
								<a href="javascript:void(0);" class="padding-10 padding-top-0 padding-bottom-0" data-action="toggleShortcut"><i class="fa fa-arrow-down"></i> <u>S</u>hortcut</a>
							</li>
							<li class="divider"></li>
							<li>
								<a href="javascript:void(0);" class="padding-10 padding-top-0 padding-bottom-0" data-action="launchFullscreen"><i class="fa fa-arrows-alt"></i> Full <u>S</u>creen</a>
							</li>
							<li class="divider"></li>
							<li>
								<a href="login.html" class="padding-10 padding-top-5 padding-bottom-5" data-action="userLogout"><i class="fa fa-sign-out fa-lg"></i> <strong><u>L</u>ogout</strong></a>
							</li>
						</ul>
					</li>
				</ul>

				<!-- logout button -->
				<div id="logout" class="btn-header transparent pull-right">
					<span> <a href="login.html" title="Sign Out" data-action="userLogout" data-logout-msg="You can improve your security further after logging out by closing this opened browser"><i class="fa fa-sign-out"></i></a> </span>
				</div>
				<!-- end logout button -->

				<!-- search mobile button (this is hidden till mobile view port) -->
				<div id="search-mobile" class="btn-header transparent pull-right">
					<span> <a href="javascript:void(0)" title="Search"><i class="fa fa-search"></i></a> </span>
				</div>
				<!-- end search mobile button -->
				
				<!-- fullscreen button -->
				<div id="fullscreen" class="btn-header transparent pull-right">
					<span> <a href="javascript:void(0);" data-action="launchFullscreen" title="Full Screen"><i class="fa fa-arrows-alt"></i></a> </span>
				</div>
				<!-- end fullscreen button -->

				<!-- multiple lang dropdown : find all flags in the flags page -->
				<ul class="header-dropdown-list hidden-xs">
					<li>
						<a href="#" class="dropdown-toggle" data-toggle="dropdown"> <img src="img/blank.gif" class="flag flag-${request.data('langcode')}" alt="Language Code"> <span> ${request.data("langcode").toUpperCase()} </span> <i class="fa fa-angle-down"></i> </a>
						<ul class="dropdown-menu pull-right" id="langcode">
							<li data-id="us"><a href="javascript:void(0);"><img src="img/blank.gif" class="flag flag-us" alt="United States"> US</a></li>
							<li data-id="kr"><a href="javascript:void(0);"><img src="img/blank.gif" class="flag flag-kr" alt="Korea"> Korea</a></li>
						</ul>
					</li>
				</ul>
				<!-- end multiple lang -->

			</div>
			<!-- end pulled right: nav area -->

		</header>
		<!-- END HEADER -->

		<!-- #NAVIGATION -->
		<!-- Left panel : Navigation area -->
		<!-- Note: This width of the aside area can be adjusted through LESS variables -->
		<aside id="left-panel">

			<!-- User info -->
			<div class="login-info">
				<span> <!-- User image size is adjusted inside CSS, it should stay as is --> 
					
					<a href="javascript:void(0);" id="show-shortcut" data-action="toggleShortcut">
						<img src="img/avatars/male.png" alt="me" class="online" /> 
						<span>
							${request.data("user")}
						</span>
						<i class="fa fa-angle-down"></i>
					</a> 
					
				</span>
			</div>
			<!-- end user info -->

			<!-- NAVIGATION : This navigation is also responsive

			To make this navigation dynamic please make sure to link the node
			(the reference to the nav > ul) after page load. Or the navigation
			will not initialize.
			-->
			<nav>

				<ul>
					<!-- li><a href="icss/loaders.html"><i class="fa fa-lg fa-fw fa-suitcase"></i> <span class="menu-item-parent">${m.asString("menu.loaders")}</span></a></li-->
					<li><a href="icss/indexers.html"><i class="fa fa-lg fa-fw fa-upload"></i> <span class="menu-item-parent">${m.asString("menu.indexers")}</span></a></li>
					<li><a href="icss/searchers.html"><i class="fa fa-lg fa-fw fa-inbox"></i> <span class="menu-item-parent">${m.asString("menu.searchers")}</span></a></li>
					<li><a href="icss/scripters.html"><i class="fa fa-lg fa-fw fa-gavel"></i> <span class="menu-item-parent">${m.asString("menu.scripters")}</span></a></li>
					<li><a href="icss/dscripts.html"><i class="fa fa-lg fa-fw fa-gavel"></i> <span class="menu-item-parent">${m.asString("menu.dscripts")}</span></a></li>
					<li><a href="icss/sites.html"><i class="fa fa-lg fa-fw fa-share-alt"></i> <span class="menu-item-parent">${m.asString("menu.sites")}</span></a></li>
					<li><a href="icss/misc.html"><i class="fa fa-lg fa-fw fa-windows"></i> <span class="menu-item-parent">${m.asString("menu.misc")}</span></a></li>
					
					<li class="divider"></li>
				</ul>
			</nav>
			<span class="minifyme" data-action="minifyMenu"> <i class="fa fa-arrow-circle-left hit"></i> </span>

		</aside>
		<!-- END NAVIGATION -->

		<!-- #MAIN PANEL -->
		<div id="main" role="main">

			<!-- RIBBON -->
			<div id="ribbon">

				<span class="ribbon-button-alignment"> 
					<span id="refresh" class="btn btn-ribbon" data-action="resetWidgets" data-title="refresh" rel="tooltip" data-placement="bottom" data-original-title="<i class='text-warning fa fa-warning'></i> Warning! This will reset all your widget settings." data-html="true" data-reset-msg="Would you like to RESET all your saved widgets and clear LocalStorage?"><i class="fa fa-refresh"></i></span> 
				</span>

				<!-- breadcrumb -->
				<ol class="breadcrumb">
					<!-- This is auto generated -->
				</ol>
				<!-- end breadcrumb -->

				<!-- You can also add more buttons to the
				ribbon for further usability

				Example below:

				<span class="ribbon-button-alignment pull-right">
				<span id="search" class="btn btn-ribbon hidden-xs" data-title="search"><i class="fa-grid"></i> Change Grid</span>
				<span id="add" class="btn btn-ribbon hidden-xs" data-title="add"><i class="fa-plus"></i> Add</span>
				<span id="search" class="btn btn-ribbon" data-title="search"><i class="fa-search"></i> <span class="hidden-mobile">Search</span></span>
				</span> -->

			</div>
			<!-- END RIBBON -->

			<!-- #MAIN CONTENT -->
			<div id="content">

			</div>
			
			<!-- END #MAIN CONTENT -->

		</div>
		<!-- END #MAIN PANEL -->

		<!-- #PAGE FOOTER -->
		<div class="page-footer">
			<div class="row">
				<div class="col-xs-12 col-sm-6">
					<span class="txt-color-white">${m.asString("main.webapp")} © 2014</span>
				</div>
			</div>
		</div>
		<!-- END FOOTER -->

		<!-- #SHORTCUT AREA : With large tiles (activated via clicking user name tag)
			 Note: These tiles are completely responsive, you can add as many as you like -->
		<div id="shortcut">
			<ul>
				<!-- li><a href="#icss/loaders.html" class="jarvismetro-tile big-cubes bg-color-orangeDark"> <span class="iconbox"> <i class="fa fa-suitcase fa-4x"></i> <span>${m.asString("menu.loaders")}</span> </span> </a></li-->
				<li><a href="#icss/indexers.html" class="jarvismetro-tile big-cubes bg-color-purple"> <span class="iconbox"> <i class="fa fa-upload fa-4x"></i> <span>${m.asString("menu.indexers")}</span> </span> </a></li>
				<li><a href="#icss/searchers.html" class="jarvismetro-tile big-cubes bg-color-blueDark"> <span class="iconbox"> <i class="fa fa-inbox fa-4x"></i> <span>${m.asString("menu.searchers")}</span> </span> </a></li>
				<li><a href="#icss/scripters.html" class="jarvismetro-tile big-cubes bg-color-orange"> <span class="iconbox"> <i class="fa fa-suitcase fa-4x"></i> <span>${m.asString("menu.scripters")}</span> </span> </a></li>
				<li><a href="#icss/dscripts.html" class="jarvismetro-tile big-cubes bg-color-orange"> <span class="iconbox"> <i class="fa fa-suitcase fa-4x"></i> <span>${m.asString("menu.dscripts")}</span> </span> </a></li>
				<li><a href="#icss/sites.html" class="jarvismetro-tile big-cubes bg-color-blue"> <span class="iconbox"> <i class="fa fa-share-alt fa-4x"></i> <span>${m.asString("menu.sites")}</span> </span> </a></li>
				<li><a href="#icss/misc.html" class="jarvismetro-tile big-cubes bg-color-greenLight"> <span class="iconbox"> <i class="fa fa-windows fa-4x"></i> <span>${m.asString("menu.misc")}</span> </span> </a></li>
			</ul>
		</div>
		<!-- END SHORTCUT AREA -->

		<!--================================================== -->

		<!-- PACE LOADER - turn this on if you want ajax loading to show (caution: uses lots of memory on iDevices)
		<script data-pace-options='{ "restartOnRequestAfter": true }' src="js/plugin/pace/pace.min.js"></script>-->
		
		<!-- #PLUGINS -->
		<script src="js/libs/jquery-2.0.2.min.js"></script>
		<script src="js/libs/jquery-ui-1.10.3.min.js"></script>
		
		<!-- JS TOUCH : include this plugin for mobile drag / drop touch events-->
		<script src="js/plugin/jquery-touch/jquery.ui.touch-punch.min.js"></script> 

		<!-- BOOTSTRAP JS -->
		<script src="js/bootstrap/bootstrap.min.js"></script>

		<!-- CUSTOM NOTIFICATION -->
		<script src="js/notification/SmartNotification.min.js"></script>

		<!-- JARVIS WIDGETS -->
		<script src="js/smartwidgets/jarvis.widget.min.js"></script>

		<!-- EASY PIE CHARTS -->
		<script src="js/plugin/easy-pie-chart/jquery.easy-pie-chart.min.js"></script>

		<!-- SPARKLINES -->
		<script src="js/plugin/sparkline/jquery.sparkline.min.js"></script>

		<!-- JQUERY VALIDATE -->
		<script src="js/plugin/jquery-validate/jquery.validate.min.js"></script>
		<script src="js/plugin/jquery-validate/additional-methods.js"></script>
		

		<!-- JQUERY MASKED INPUT -->
		<script src="js/plugin/masked-input/jquery.maskedinput.min.js"></script>

		<!-- JQUERY SELECT2 INPUT -->
		<script src="js/plugin/select2/select2.min.js"></script>

		<!-- JQUERY UI + Bootstrap Slider -->
		<script src="js/plugin/bootstrap-slider/bootstrap-slider.min.js"></script>

		<!-- browser msie issue fix -->
		<script src="js/plugin/msie-fix/jquery.mb.browser.min.js"></script>

		<!-- FastClick: For mobile devices: you can disable this in app.js -->
		<script src="js/plugin/fastclick/fastclick.min.js"></script>

		<!--[if IE 8]>
			<h1>Your browser is out of date, please update your browser by going to www.microsoft.com/download</h1>
		<![endif]-->

		<!-- Demo purpose only -->
		<script src="js/demo.min.js"></script>

		<!-- MAIN APP JS FILE -->
		<script src="js/app.min.js"></script>

	</body>


	<script>
	$(document).ready(function() {
		$("#recent_activity").on("show.bs.dropdown", function () {
			$.ajax({
				url:'/admin/traces/${request.data("user")}' ,
				dataType:'json',
				success:function(data){
					$(".project-context .dropdown-menu").empty() ;
					var tlist = data['traces'] ;
					for(var idx in tlist){
						$(".project-context .dropdown-menu").append('<li><a href="javascript:void(0);">' + tlist[idx]['method'] + ' : ' + tlist[idx]['uri'] + '</a></li>');
					}
					$(".project-context .dropdown-menu").append('<li class="divider"></li>');
					$(".project-context .dropdown-menu").append('<li><a href="javascript:void(0);" id="clearTrace"><i class="fa fa-power-off"></i> Clear</a></li>');
					$("#clearTrace").click(function(){
						$.ajax({
							url:'/admin/traces/${request.data("user")}' ,
							type:'DELETE',
							dataType:'text',
							data:{}, 
							success:function(data){
								// location.reload() ;
							}, 
							error:function(request,status,error){
								console.log('response', request, status, error) ;
							}
						}) ;
						// console.log('clear Trace') ;
					}) ;
				}, 
				error:function(request,status,error){
					console.log('response', request, status, error) ;
				}
			}) ;
		}) ;
		
		$("#langcode li").click(function() {
			 var selcode = $(this).attr('data-id') ;
			$(this).siblings().removeClass("active");
			$(this).addClass("active");
			$.ajax({
				url:'/admin/misc/profile/${request.data("user")}' ,
				type:'POST',
				dataType:'text',
				data:{'langcode':selcode}, 
				success:function(data){
					location.reload() ;
				}, 
				error:function(request,status,error){
					console.log('response', request, status, error) ;
				}
			}) ;
			
		});
	});
	</script>
</html>